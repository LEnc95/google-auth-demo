<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Firebase Google Auth Demo</title>
    <style>
      #protectedContent {
        display: none;
        margin-top: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        background: #f9f9f9;
      }
    </style>
  </head>
  <body>
    <h1>Google Sign-In Demo</h1>

    <button id="googleLogin">Sign in with Google</button>
    <button id="googleLogout" style="display:none;">Sign out</button>

    <h2>User Info</h2>
    <pre id="userInfo">Not signed in</pre>

    <!-- Subscription Button (visible when signed in but not subscribed) -->
    <div id="subscriptionSection" style="display:none;">
      <h2>Get Premium Access</h2>
      <p>Subscribe to access premium features!</p>
      <button id="goToCheckout">Subscribe with Stripe</button>
    </div>

    <!-- Protected Section (visible only when subscribed) -->
    <div id="protectedContent">
      <h2>Members-Only Section</h2>
      <p>ðŸŽ‰ Welcome! You can see this only if you are subscribed.</p>
      <p>You have access to all premium features!</p>
      <div style="margin-top: 15px;">
        <button id="refreshSubscription" style="margin-right: 10px;">Refresh Subscription Status</button>
        <button id="cancelSubscription" style="background-color: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Cancel Subscription</button>
      </div>
    </div>

    <!-- Cancellation Confirmation Modal -->
    <div id="cancelModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;">
      <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 8px; max-width: 400px; width: 90%;">
        <h3 style="margin-top: 0; color: #dc3545;">Cancel Subscription</h3>
        <p>Are you sure you want to cancel your subscription?</p>
        <p style="color: #666; font-size: 14px;">This action cannot be undone. You will lose access to all premium features immediately.</p>
        <div style="margin-top: 20px; text-align: right;">
          <button id="cancelConfirmNo" style="margin-right: 10px; padding: 8px 16px; border: 1px solid #ccc; background: white; border-radius: 4px; cursor: pointer;">Keep Subscription</button>
          <button id="cancelConfirmYes" style="padding: 8px 16px; background-color: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Yes, Cancel</button>
        </div>
      </div>
    </div>

    <!-- Load app.js -->
    <script type="module" src="app.js"></script>
  </body>
</html>
